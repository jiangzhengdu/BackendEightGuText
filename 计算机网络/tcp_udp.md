请简述TCP/UDP的区别
===

TCP和UDP是OSI模型中的运输层中的协议。TCP提供可靠的通信传输，而UDP则常被用于让广播和细节控制交给应用的通信传输。
两者的区别大致如下：

    TCP面向连接，UDP面向非连接即发送数据前不需要建立链接
    TCP提供可靠的服务（数据传输），UDP无法保证
    TCP面向字节流，UDP面向报文
    TCP数据传输慢，UDP数据传输快

    TCP提供一种面向连接的、可靠的字节流服务
    在一个TCP连接中，仅有两方进行彼此通信，因此广播和多播不能用于TCP
    TCP使用校验和，确认和重传机制来保证可靠传输
    TCP使用累积确认
    TCP使用滑动窗口机制来实现流量控制，通过动态改变窗口的大小进行拥塞控制

TCP和UDP的应用场景
---

TCP：当对网络通讯质量有要求的时候，比如：整个数据要准确无误的传递给对方，这往往用于一些要求可靠的应用，比如HTTP、HTTPS、FTP等传输文件的协议，POP、SMTP等邮件传输的协议。
在日常生活中，常见使用TCP协议的应用如：浏览器，用的HTTP；FlashFXP，用的FTP；Outlook，用的POP、SMTP；Putty，用的Telnet、SSH；QQ文件传输

UDP：当强调传输性能而不是传输的完整性时， 要求网络通讯速度能尽量的快。如：QQ语音 QQ视频等。

TCP对应的协议和UDP对应的协议
---

TCP对应的协议：

    FTP：定义了文件传输协议，使用21端口。
    Telnet：一种用于远程登陆的端口，使用23端口，用户可以以自己的身份远程连接到计算机上，可提供基于DOS模式下的通信服务。
    SMTP：邮件传送协议，用于发送邮件。服务器开放的是25号端口。
    POP3：它是和SMTP对应，POP3用于接收邮件。POP3协议所用的是110端口。
    HTTP：是从Web服务器传输超文本到本地浏览器的传送协议，端口默认80。

UDP对应的协议：

    DNS：用于域名解析服务，将域名地址转换为IP地址。DNS用的是53号端口。
    SNMP：简单网络管理协议，使用161号端口，是用来管理网络设备的。由于网络设备很多，无连接的服务就体现出其优势。
    TFTP(Trival File TransferProtocal)，简单文件传输协议，该协议在熟知端口69上使用UDP服务。

为什么 TCP 叫数据流模式？ UDP 叫数据报模式？
---

    所谓的“流模式”，是指TCP发送端发送几次数据和接收端接收几次数据是没有必然联系的，比如你通过 TCP连接给另一端发送数据，你只调用了一次 write，发送了100个字节，但是对方可以分10次收完，每次10个字节；你也可以调用10次write，每次10个字节，但是对方可以一次就收完。
    原因：这是因为TCP是面向连接的，一个 socket 中收到的数据都是由同一台主机发出，且有序地到达，所以每次读取多少数据都可以。

    所谓的“数据报模式”，是指UDP发送端调用了几次 write，接收端必须用相同次数的 read 读完。UDP是基于报文的，在接收的时候，每次最多只能读取一个报文，报文和报文是不会合并的，如果缓冲区小于报文长度，则多出的部分会被丢弃。
    原因：这是因为UDP是无连接的，只要知道接收端的 IP 和端口，任何主机都可以向接收端发送数据。 这时候，如果一次能读取超过一个报文的数据， 则会乱套。

TCP中的流量控制和拥塞控制
---

tcp协议如何保证传输的可靠性

流量控制主要针对的是端到端传输中控制流量大小并保证传输可靠性（未收到ack就不滑动）。流量控制往往是指点对点通信量的控制，所要做的是抑制发送端发送数据的速率。

拥塞控制主要是一个全局性过程，涉及到所有主机，路由器，以及与降低网络传输性能有关的所有因素。防止过多的数据注入到网络中。
如果有发生丢包则通过拥塞控制减小窗口，确定出合适(慢启动 拥塞避免 快重传 快恢复)的拥塞窗口（增性加乘性减）。

 TCP是面向连接的，UDP是无连接的；

    TCP是可靠的，UDP是不可靠的；

    TCP只支持点对点通信，UDP支持一对一、一对多、多对一、多对多的通信模式；

    TCP是面向字节流的，UDP是面向报文的；

    TCP有拥塞控制机制;UDP没有拥塞控制，适合媒体通信；

    TCP首部开销(20个字节)比UDP的首部开销(8个字节)要大

若通信数据完整性大于实时性，则应选择用TCP协议（文件传输、重要状态等）；反之，则使用UDP协议（如视频传输、实时通信等）
